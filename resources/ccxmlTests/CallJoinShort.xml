<?xml version="1.0" encoding="UTF-8"?>
<ccxml xmlns="http://www.w3.org/2002/09/ccxml" version="1.0">

<var name="callid_alice"/>
<var name="calid_bob"/>

<var name="appstate" expr="'init'" />

     <eventprocessor statevariable="appstate">
       
                <transition event="ccxml.loaded" >
                   <log expr="c4lling!"/>
                    <assign name="appstate" expr="'trying_alice'" />
                   <createcall dest="'17147773456'"/>
                </transition>
                
                <transition event="connection.connected" name="connEvent" state="'trying_alice'">
                   <log expr="**********************alice connected! ***************************"/>
                   <assign name="appstate" expr="'trying_bob'" />
                   <assign name="callid_alice" expr="connEvent.connectionid"/>
    			   <createcall dest="'17147570982'" joinid="callid_alice" joindirection="'both'" />
            	</transition>
                
                <transition event="connection.connected" name="connEvent" state="'trying_bob'">
                  <log expr="bob connected!"/>
                 
                </transition>
                
                <!-- todo: test the conference.joined event-->
                
        </eventprocessor>
</ccxml>